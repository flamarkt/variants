(()=>{var t={n:a=>{var e=a&&a.__esModule?()=>a.default:()=>a;return t.d(e,{a:e}),e},d:(a,e)=>{for(var r in e)t.o(e,r)&&!t.o(a,r)&&Object.defineProperty(a,r,{enumerable:!0,get:e[r]})},o:(t,a)=>Object.prototype.hasOwnProperty.call(t,a),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},a={};(()=>{"use strict";t.r(a),t.d(a,{backoffice:()=>P});const e=((flarum.extensions["flamarkt-core"]||{}).backoffice||{})["components/ProductList"];var r=t.n(e);const o=((flarum.extensions["flamarkt-core"]||{}).backoffice||{})["pages/ProductShowPage"];var n=t.n(o);const i=((flarum.extensions["flamarkt-core"]||{}).common||{})["states/ProductListState"];var c=t.n(i);const s=flarum.core.compat["common/extend"],d=flarum.core.compat["common/components/Button"];var u=t.n(d);const p=flarum.core.compat["common/components/Switch"];var l=t.n(p);function f(t,a){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,a){return t.__proto__=a,t},f(t,a)}const h=flarum.core.compat["common/components/LinkButton"];var v=t.n(h);const b=((flarum.extensions["flamarkt-backoffice"]||{}).backoffice||{})["components/AbstractList"];var y=function(t){var a,e;function r(){return t.apply(this,arguments)||this}e=t,(a=r).prototype=Object.create(e.prototype),a.prototype.constructor=a,f(a,e);var o=r.prototype;return o.head=function(){var a=t.prototype.head.call(this);return a.add("title",m("th","Title"),20),a.add("price",m("th","Price"),10),a},o.columns=function(a){var e=t.prototype.columns.call(this,a);return e.add("title",m("td",m("input.FormControl",{type:"text",value:a.title()})),20),e.add("price",m("td",m("input.FormControl",{type:"number",value:a.price()})),10),e},o.actions=function(a){var e=t.prototype.actions.call(this,a);return e.add("edit",v().component({className:"Button Button--icon",icon:"fas fa-pen",href:app.route.product(a)})),e},r}(t.n(b)()),P={"components/ProductVariantList":y};app.initializers.add("flamarkt-variants",(function(){(0,s.extend)(r().prototype,"head",(function(t){t.add("balance",m("th","Variants"))})),(0,s.extend)(r().prototype,"columns",(function(t,a){t.add("balance",m("td",a.attribute("isVariantMaster")?"Yes":"No"))})),(0,s.extend)(n().prototype,"oninit",(function(){this.variantChildrenAttached=!0})),(0,s.extend)(n().prototype,"show",(function(){this.isVariantMaster=this.product.attribute("isVariantMaster"),this.variantProductListState=new(c())({filter:{variantOf:this.product.id()}}),this.product.attribute("isVariantMaster")&&this.variantProductListState.refresh()})),(0,s.extend)(n().prototype,"fields",(function(t){var a=this;this.product.attribute("isVariantChild")?t.add("variant-child-toggle",m(".Form-group",[m("label","Variant Child"),l().component({state:this.variantChildrenAttached,onchange:function(t){a.variantChildrenAttached=t,a.dirty=!0}},"Attached as child")])):t.add("variant-master-toggle",m(".Form-group",[m("label","Variant Master"),l().component({state:this.isVariantMaster,onchange:function(t){a.isVariantMaster=t,a.dirty=!0}},"Make into master")])),this.product.attribute("isVariantMaster")&&t.add("variants",m(".Form-group",[m("label","Variants"),m(y,{state:this.variantProductListState}),u().component({onclick:function(){app.store.createRecord("flamarkt-products").save({relationships:{variantMaster:a.product}}).then((function(t){a.variantProductListState.add(t),m.redraw()}))}},"Add"),u().component({onclick:function(){a.variantProductListState.refresh()}},"Refresh")]),-10)})),(0,s.extend)(n().prototype,"data",(function(t){t.isVariantMaster=this.isVariantMaster,this.variantChildrenAttached||(t.relationships=t.relationships||{},t.relationships.variantMaster=null)}))}))})(),module.exports=a})();
//# sourceMappingURL=backoffice.js.map